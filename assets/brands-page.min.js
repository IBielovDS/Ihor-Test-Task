(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}function n(e,r,n){return r=s(r),function(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,a()?Reflect.construct(r,n||[],s(e).constructor):r.apply(e,n))}function o(t){var e="function"==typeof Map?new Map:void 0;return o=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(a())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&i(o,r.prototype),o}(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,t)},o(t)}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}if(customElements.component="brands-page",!customElements.get(customElements.component)){var c=function(t){function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n(this,r)).state={currentView:"brands",currentType:null,currentBrand:null,sortOrder:"name-asc",isMobile:window.innerWidth<1024},t.grid=t.querySelector(".brands-page__grid"),t.backButton=t.querySelector(".brands-page-back"),t.typeButtons=t.querySelectorAll(".tab-item"),t.sortDropdown=t.querySelector('custom-dropdown[data-page="brand"]'),t.cards=t.querySelectorAll(".brands-page__grid > div"),t.sortSelect=t.querySelector(".brands-page-tools__sort"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(r,t),o=r,a=[{key:"connectedCallback",value:function(){this.init()}},{key:"init",value:function(){this.applyInitialView(),this.addEventListeners(),this.sortCards(),this.grid.classList.add("loaded"),this.backButton.classList.add("loaded")}},{key:"applyInitialView",value:function(){this.hideBackButton();var t=this.querySelector(".tab-item.active");t&&(this.state.currentType=t.dataset.type,this.filterCards())}},{key:"addEventListeners",value:function(){var t=this;this.typeButtons.forEach((function(e){e.addEventListener("click",(function(e){return t.handleTypeClick(e)}))})),this.sortSelect.querySelector("select").addEventListener("change",(function(e){return t.handleSort(e)})),this.backButton.addEventListener("click",(function(){return t.handleBack()})),this.bindCardEvents(),window.addEventListener("resize",(function(){return t.handleResize()}))}},{key:"bindCardEvents",value:function(){var t=this;this.cards.forEach((function(e){if(e.dataset.model){var r=e.querySelector("a");r&&t.state.isMobile&&e.addEventListener("click",(function(t){t.target.closest("a")||(window.location.href=r.href)}))}else{var n;null===(n=e.querySelector("button"))||void 0===n||n.addEventListener("click",(function(){t.showModels(e.dataset.brand,e.dataset.type)})),t.state.isMobile&&e.addEventListener("click",(function(r){r.target.closest("button")||t.showModels(e.dataset.brand,e.dataset.type)}))}}))}},{key:"handleResize",value:function(){var t=this.state.isMobile;this.state.isMobile=window.innerWidth<1024,t!==this.state.isMobile&&(this.removeCardListeners(),this.addCardListeners())}},{key:"removeCardListeners",value:function(){this.cards.forEach((function(t){var e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)})),this.cards=this.querySelectorAll(".brands-page__grid > div")}},{key:"addCardListeners",value:function(){this.bindCardEvents()}},{key:"handleTypeClick",value:function(t){var e=t.target.dataset.type;this.typeButtons.forEach((function(t){return t.classList.remove("active")})),t.target.classList.add("active"),"models"===this.state.currentView&&this.handleBack(),this.state.currentType=e,this.filterCards(),this.sortCards()}},{key:"handleSort",value:function(t){this.state.sortOrder=t.target.value,this.sortCards()}},{key:"handleBack",value:function(){this.state.currentView="brands",this.state.currentBrand=null,this.hideBackButton(),this.showSortSelect(),this.showAllCards(),this.filterCards(),this.sortCards()}},{key:"showModels",value:function(t,e){this.state.currentView="models",this.state.currentBrand=t,this.showBackButton(),this.hideSortSelect(),this.cards.forEach((function(r){var n=r.dataset.model,o=r.dataset.brand===t,a=r.dataset.type===e;r.style.display=n&&o&&a?"block":"none"}))}},{key:"filterCards",value:function(){var t=this;"brands"===this.state.currentView&&this.cards.forEach((function(e){var r=!t.state.currentType||e.dataset.type===t.state.currentType,n=!e.dataset.model;e.style.display=r&&n?"block":"none"}))}},{key:"sortCards",value:function(){var t=this,e=Array.from(this.cards).filter((function(t){return"none"!==t.style.display}));e.sort((function(e,r){var n="models"===t.state.currentView?e.dataset.model:e.dataset.brand,o="models"===t.state.currentView?r.dataset.model:r.dataset.brand;switch(t.state.sortOrder){case"name-asc":return n.localeCompare(o);case"name-desc":return o.localeCompare(n);case"newest":return Array.from(t.cards).indexOf(r)-Array.from(t.cards).indexOf(e);default:return 0}})),e.forEach((function(e){t.grid.appendChild(e)}))}},{key:"showAllCards",value:function(){this.cards.forEach((function(t){t.style.display="block"}))}},{key:"showBackButton",value:function(){this.backButton.style.display="flex"}},{key:"hideBackButton",value:function(){this.backButton.style.display="none"}},{key:"showSortSelect",value:function(){this.sortSelect.style.display="block"}},{key:"hideSortSelect",value:function(){this.sortSelect.style.display="none"}}],a&&e(o.prototype,a),s&&e(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,a,s}(o(HTMLElement));customElements.define(customElements.component,c)}})();