(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function a(t,n,i){return n=u(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,l()?Reflect.construct(n,i||[],u(t).constructor):n.apply(t,i))}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(l())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&s(r,n.prototype),r}(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)},c(e)}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}if(customElements.component="product-media-gallery",!customElements.get(customElements.component)){var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=a(this,t)).sliderTop=e.querySelector(".product-media-gallery__top"),e.sliderBottom=e.querySelector(".product-media-gallery__bottom"),e.navPrev=e.querySelector(".product-media-galllery-prev"),e.navNext=e.querySelector(".product-media-galllery-next"),e.pagination=e.querySelector(".swiper-pagination"),e.imageConfig=e.querySelector(".image-config"),e.imageData=JSON.parse(e.imageConfig.textContent.trim()),e.variantsCount=Number(e.getAttribute("data-variants-count")),document.addEventListener("variant:changed",(function(t){return e.handleColorChange(t.detail.color)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),i=t,(o=[{key:"handleColorChange",value:function(e){if(e&&!(this.variantsCount<=1)){var t=this.sliderTop.querySelector(".swiper-wrapper"),n=this.sliderBottom.querySelector(".swiper-wrapper"),i=this.generateFilteredSlides(e);i.main&&i.thumbs&&(this.destroySwipers(),i.main&&(t.innerHTML=i.main),i.thumbs&&(n.innerHTML=i.thumbs),this.initializeSliders(),this.updateThumbsState(0),this.initFancybox(e))}}},{key:"generateFilteredSlides",value:function(e){var t={main:"",thumbs:""};return this.imageData.images.forEach((function(n,i){var r,o=n.url,a=n.alt,c=n.width,l="https:"+o.replace(/\\/g,""),s=[10,20,30,40,50,75,100,150,200,250,320,480,576,768,992,1024,1220,1440,1680,1920,2e3,2180].map((function(e){if(e>c)return!1;var t=l.includes("&")?"&width=":"?width=";return"".concat(l).concat(t).concat(e," ").concat(e,"w")})).filter(Boolean).join(", "),u=a.split(" | "),d=null===(r=u[u.length-1])||void 0===r?void 0:r.toLowerCase().replace(/[^a-zA-Z0-9]/g,"");d===e.toLowerCase().replace(/[^a-zA-Z0-9]/g,"")&&(t.main+='\n            <div class="swiper-slide top__slide !h-fit relative">\n              <a data-fancybox="gallery" href="'.concat(l,'" data-color="').concat(d,'">\n                <img \n                  src="').concat(l,'"\n                  alt="').concat(a,'"\n                  srcset="').concat(s,'"\n                  class="aspect-square object-contain w-full h-full"\n                  fetchpriority="').concat(0===i?"high":"auto",'"\n                  loading="').concat(0===i?"eager":"lazy",'"\n                  sizes="(max-width: 1024px) 100vw, 50vw"\n                />\n              </a>\n            </div>\n          '),t.thumbs+='\n            <div class="swiper-slide cursor-pointer rounded-4 border border-solid border-transparent transition-all opacity-50 [&.swiper-slide-thumb-active]:transition-all [&.swiper-slide-thumb-active]:border-black-200 [&.swiper-slide-thumb-active]:opacity-100 relative aspect-square [&_img]:text-0">\n              <img \n                src="'.concat(l,'"\n                alt="').concat(a,'"\n                srcset="').concat(s,'"\n                class="aspect-auto rounded-4 object-cover object-center w-full h-full absolute top-0 left-0"\n                fetchpriority="').concat(0===i?"high":"auto",'"\n                loading="').concat(0===i?"eager":"lazy",'"\n                sizes="80px"\n              />\n            </div>\n          '))})),t}},{key:"initFancybox",value:function(e){var t=this;Fancybox.unbind('[data-fancybox="gallery"]');var i=n(n({},this.getFancyboxOptions()),{},{on:n(n({},this.getFancyboxOptions().on),{},{"Carousel.ready":function(n){var i=Array.from(n.carousel.slides).filter((function(n){var i,r=n.src,o=t.imageData.images.find((function(e){return"https:"+e.url.replace(/\\/g,"")===r}));if(!o)return!1;var a=o.alt.split(" | ");return(null===(i=a[a.length-1])||void 0===i?void 0:i.toLowerCase())===e.toLowerCase()}));n.carousel.slides=i}})});Fancybox.bind('[data-fancybox="gallery"]',i)}},{key:"getFancyboxOptions",value:function(){return{tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n            <div class="fancybox__backdrop"></div>\n            <div class="fancybox__carousel"></div>\n            <div class="fancybox__counter">\n              <span class="current"></span>\n              <span class="total"></span>\n            </div>\n            <div class="fancybox__footer"></div>\n          </div>'},Toolbar:{display:{left:[],middle:["zoomIn","zoomOut"],right:["close"]}},Thumbs:{type:"classic",Carousel:{fill:!0,preload:1}},Slideshow:!1,Fullscreen:!1,Image:{zoom:!0,click:!1,wheel:"zoom",Panzoom:{panOnlyZoomed:!0}},animated:!1,dragToClose:!1}}},{key:"initializeSliders",value:function(){var e=this;this.activeSliderBottom=new Swiper(this.sliderBottom,{slidesPerView:7,spaceBetween:8,freeMode:!0,watchSlidesProgress:!0,watchSlidesVisibility:!0,on:{init:function(t){t.slides.forEach((function(t,n){t.addEventListener("click",(function(){e.activeSliderTop.slideTo(n),e.updateThumbsState(n)}))}))}}}),this.activeSliderTop=new Swiper(this.sliderTop,{slidesPerView:1,spaceBetween:20,navigation:{nextEl:this.navNext,prevEl:this.navPrev},thumbs:{swiper:this.activeSliderBottom,slideThumbActiveClass:"swiper-slide-thumb-active"},pagination:{el:this.pagination,clickable:!0,type:"bullets",dynamicBullets:!0,dynamicMainBullets:5},on:{slideChange:function(t){e.pagination&&e.pagination.querySelectorAll(".swiper-pagination-bullet").forEach((function(e,n){e.classList.toggle("swiper-pagination-bullet-active",n===t.activeIndex)})),e.updateThumbsState(t.activeIndex)}}}),this.updateSwiperStates()}},{key:"updateThumbsState",value:function(e){this.activeSliderBottom&&this.activeSliderBottom.slides&&(this.activeSliderBottom.slides.forEach((function(t,n){t.classList.remove("swiper-slide-thumb-active"),n===e&&t.classList.add("swiper-slide-thumb-active")})),this.activeSliderBottom.slideTo(e))}},{key:"updateSwiperStates",value:function(){var e=this;this.activeSliderBottom&&this.activeSliderBottom.slides&&this.activeSliderBottom.slides.forEach((function(t,n){t.classList.toggle("swiper-slide-thumb-active",n===e.activeSliderTop.activeIndex)}))}},{key:"destroySwipers",value:function(){this.activeSliderTop&&(this.activeSliderTop.destroy(!0,!0),this.activeSliderTop=null),this.activeSliderBottom&&(this.activeSliderBottom.destroy(!0,!0),this.activeSliderBottom=null)}},{key:"connectedCallback",value:function(){var e=this,t=setInterval((function(){"undefined"!=typeof Swiper&&(e.initializeSliders(),clearInterval(t))}),100)}},{key:"disconnectedCallback",value:function(){this.destroySwipers(),Fancybox.unbind('[data-fancybox="gallery"]')}}])&&r(i.prototype,o),c&&r(i,c),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,o,c}(c(HTMLElement));customElements.define(customElements.component,d)}})();